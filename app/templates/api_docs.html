<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract OCR API - Complete Documentation</title>
    <style>
        :root {
            --primary-color: #007acc;
            --secondary-color: #f8f9fa;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --dark-color: #343a40;
            --light-color: #ffffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background-color: var(--secondary-color);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), #0056b3);
            color: var(--light-color);
            padding: 2rem 0;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .nav {
            background: var(--light-color);
            padding: 1rem 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .nav li {
            margin: 0 1rem;
        }
        
        .nav a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .nav a:hover {
            background-color: var(--secondary-color);
        }
        
        .content {
            background: var(--light-color);
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .section {
            margin-bottom: 3rem;
        }
        
        .section h2 {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }
        
        .section h3 {
            color: var(--dark-color);
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
        }
        
        .section h4 {
            color: var(--dark-color);
            font-size: 1.2rem;
            margin: 1.5rem 0 0.5rem 0;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
        }
        
        .code-block pre {
            margin: 0;
        }
        
        .highlight {
            background: #fff3cd;
            border-left: 4px solid var(--warning-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }
        
        .success {
            background: #d4edda;
            border-left: 4px solid var(--success-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }
        
        .error {
            background: #f8d7da;
            border-left: 4px solid var(--danger-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }
        
        .endpoint {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .method {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: bold;
            color: var(--light-color);
            margin-right: 1rem;
            font-size: 0.8rem;
        }
        
        .method.post { background: var(--success-color); }
        .method.get { background: var(--primary-color); }
        .method.put { background: var(--warning-color); color: var(--dark-color); }
        .method.delete { background: var(--danger-color); }
        
        .table-container {
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--light-color);
        }
        
        th, td {
            border: 1px solid #dee2e6;
            padding: 0.75rem;
            text-align: left;
        }
        
        th {
            background: var(--secondary-color);
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 4px;
            text-transform: uppercase;
        }
        
        .badge.success { background: var(--success-color); color: var(--light-color); }
        .badge.warning { background: var(--warning-color); color: var(--dark-color); }
        .badge.danger { background: var(--danger-color); color: var(--light-color); }
        .badge.info { background: var(--primary-color); color: var(--light-color); }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .card {
            background: var(--light-color);
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .card h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .footer {
            background: var(--dark-color);
            color: var(--light-color);
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .header p { font-size: 1rem; }
            .nav ul { flex-direction: column; align-items: center; }
            .nav li { margin: 0.25rem 0; }
            .content { margin: 1rem 0; padding: 1rem; }
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>Contract OCR API</h1>
            <p>Complete Documentation & Integration Guide</p>
        </div>
    </div>
    
    <nav class="nav">
        <div class="container">
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#authentication">Authentication</a></li>
                <li><a href="#endpoints">Endpoints</a></li>
                <li><a href="#examples">Examples</a></li>
                <li><a href="#copilot-studio">Copilot Studio</a></li>
                <li><a href="#sdks">SDKs</a></li>
                <li><a href="#errors">Error Handling</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="container">
        <div class="content">
            <section id="overview" class="section">
                <h2>üöÄ API Overview</h2>
                <p>The Contract OCR API is a specialized service for extracting and normalizing text from contract documents using advanced OCR techniques. It's designed for high accuracy, scalability, and seamless integration with Microsoft Copilot Studio and other platforms.</p>
                
                <div class="grid">
                    <div class="card">
                        <h4>üéØ Key Features</h4>
                        <ul>
                            <li>Multi-engine OCR processing</li>
                            <li>Advanced text normalization</li>
                            <li>Page-based content organization</li>
                            <li>Legal term extraction</li>
                            <li>Asynchronous processing</li>
                            <li>Webhook notifications</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>üìã File Requirements</h4>
                        <ul>
                            <li><strong>Format:</strong> PDF only</li>
                            <li><strong>Size:</strong> Maximum 50MB</li>
                            <li><strong>Pages:</strong> Up to 100 pages</li>
                            <li><strong>Quality:</strong> Standard resolution recommended</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>‚ö° Performance</h4>
                        <ul>
                            <li><strong>1-5 pages:</strong> 30-60 seconds</li>
                            <li><strong>6-20 pages:</strong> 1-3 minutes</li>
                            <li><strong>21-50 pages:</strong> 3-7 minutes</li>
                            <li><strong>51-100 pages:</strong> 7-15 minutes</li>
                        </ul>
                    </div>
                </div>
                
                <div class="highlight">
                    <strong>Base URL:</strong> <code>https://api.contractocr.com/api/v1</code><br>
                    <strong>Interactive Docs:</strong> <a href="/docs" target="_blank">Swagger UI</a> | <a href="/redoc" target="_blank">ReDoc</a>
                </div>
            </section>
            
            <section id="authentication" class="section">
                <h2>üîê Authentication</h2>
                <p>All API requests require authentication using an API key passed in the request header.</p>
                
                <h3>API Key Header</h3>
                <div class="code-block">
                    <pre>X-API-Key: your-api-key-here</pre>
                </div>
                
                <h3>Rate Limits</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Limit Type</th>
                                <th>Requests</th>
                                <th>Time Window</th>
                                <th>HTTP Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Per Minute</td>
                                <td>60</td>
                                <td>60 seconds</td>
                                <td>429</td>
                            </tr>
                            <tr>
                                <td>Per Hour</td>
                                <td>1,000</td>
                                <td>3,600 seconds</td>
                                <td>429</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <section id="endpoints" class="section">
                <h2>üì° API Endpoints</h2>
                
                <h3>Document Upload</h3>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <strong>/documents/upload</strong>
                    <p>Upload a PDF document for OCR processing</p>
                </div>
                
                <h4>Request</h4>
                <div class="code-block">
                    <pre>curl -X POST "https://api.contractocr.com/api/v1/documents/upload" \
     -H "X-API-Key: your-api-key" \
     -F "file=@contract.pdf"</pre>
                </div>
                
                <h4>Response</h4>
                <div class="code-block">
                    <pre>{
  "document_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "queued",
  "message": "Document uploaded successfully and queued for processing"
}</pre>
                </div>
                
                <h3>Status Check</h3>
                <div class="endpoint">
                    <span class="method get">GET</span>
                    <strong>/documents/{document_id}/status</strong>
                    <p>Get current processing status and progress</p>
                </div>
                
                <h4>Response Examples</h4>
                <div class="grid">
                    <div class="card">
                        <h4><span class="badge info">Queued</span></h4>
                        <div class="code-block">
                            <pre>{
  "document_id": "550e8400...",
  "status": "queued",
  "progress": 0,
  "message": "Document is queued"
}</pre>
                        </div>
                    </div>
                    <div class="card">
                        <h4><span class="badge warning">Processing</span></h4>
                        <div class="code-block">
                            <pre>{
  "document_id": "550e8400...",
  "status": "processing",
  "progress": 45,
  "message": "Processing page 5 of 10"
}</pre>
                        </div>
                    </div>
                    <div class="card">
                        <h4><span class="badge success">Completed</span></h4>
                        <div class="code-block">
                            <pre>{
  "document_id": "550e8400...",
  "status": "completed",
  "progress": 100,
  "message": "Processing completed"
}</pre>
                        </div>
                    </div>
                </div>
                
                <h3>Get Results</h3>
                <div class="endpoint">
                    <span class="method get">GET</span>
                    <strong>/documents/{document_id}/results</strong>
                    <p>Retrieve complete processing results for a completed document</p>
                </div>
                
                <h4>Response Structure</h4>
                <div class="code-block">
                    <pre>{
  "document_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "completed",
  "progress": 100,
  "pages": [
    {
      "page_number": 1,
      "text_blocks": [
        {
          "text": "CONTRACT AGREEMENT",
          "confidence": 0.98,
          "bounding_box": {"x": 100, "y": 50, "width": 200, "height": 30},
          "font_size": 16.0,
          "is_title": true
        }
      ],
      "raw_text": "CONTRACT AGREEMENT\n\nThis agreement...",
      "normalized_text": "CONTRACT AGREEMENT\n\nThis agreement..."
    }
  ],
  "metadata": {
    "filename": "contract.pdf",
    "file_size": 1048576,
    "page_count": 5,
    "processing_time": 45.2,
    "ocr_confidence": 0.95
  },
  "legal_terms": ["agreement", "contract", "party", "terms"]
}</pre>
                </div>
            </section>
            
            <section id="examples" class="section">
                <h2>üíª Code Examples</h2>
                
                <h3>Python Example</h3>
                <div class="code-block">
                    <pre>import requests
import time

class ContractOCRClient:
    def __init__(self, api_key):
        self.api_key = api_key
        self.base_url = "https://api.contractocr.com/api/v1"
        self.headers = {"X-API-Key": api_key}
    
    def process_document(self, file_path):
        # Upload document
        with open(file_path, 'rb') as f:
            response = requests.post(
                f"{self.base_url}/documents/upload",
                headers=self.headers,
                files={'file': f}
            )
        
        upload_result = response.json()
        document_id = upload_result['document_id']
        
        # Wait for completion
        while True:
            status_response = requests.get(
                f"{self.base_url}/documents/{document_id}/status",
                headers=self.headers
            )
            status = status_response.json()
            
            if status['status'] == 'completed':
                # Get results
                results_response = requests.get(
                    f"{self.base_url}/documents/{document_id}/results",
                    headers=self.headers
                )
                return results_response.json()
            elif status['status'] == 'failed':
                raise Exception(f"Processing failed: {status.get('error_message')}")
            
            time.sleep(10)  # Wait 10 seconds before checking again

# Usage
client = ContractOCRClient("your-api-key")
results = client.process_document("contract.pdf")
print(f"Extracted {len(results['pages'])} pages")
print(f"Legal terms found: {results['legal_terms']}")</pre>
                </div>
                
                <h3>JavaScript Example</h3>
                <div class="code-block">
                    <pre>class ContractOCRClient {
    constructor(apiKey) {
        this.apiKey = apiKey;
        this.baseUrl = 'https://api.contractocr.com/api/v1';
        this.headers = { 'X-API-Key': apiKey };
    }
    
    async uploadDocument(file) {
        const formData = new FormData();
        formData.append('file', file);
        
        const response = await fetch(`${this.baseUrl}/documents/upload`, {
            method: 'POST',
            headers: this.headers,
            body: formData
        });
        
        return await response.json();
    }
    
    async getStatus(documentId) {
        const response = await fetch(
            `${this.baseUrl}/documents/${documentId}/status`,
            { headers: this.headers }
        );
        return await response.json();
    }
    
    async processDocument(file) {
        // Upload
        const uploadResult = await this.uploadDocument(file);
        const documentId = uploadResult.document_id;
        
        // Poll for completion
        return new Promise((resolve, reject) => {
            const checkStatus = async () => {
                const status = await this.getStatus(documentId);
                
                if (status.status === 'completed') {
                    const results = await this.getResults(documentId);
                    resolve(results);
                } else if (status.status === 'failed') {
                    reject(new Error(status.error_message));
                } else {
                    setTimeout(checkStatus, 10000);
                }
            };
            checkStatus();
        });
    }
}

// Usage with file input
document.getElementById('fileInput').addEventListener('change', async (event) => {
    const file = event.target.files[0];
    const client = new ContractOCRClient('your-api-key');
    
    try {
        const results = await client.processDocument(file);
        console.log('Processing complete:', results);
    } catch (error) {
        console.error('Error:', error.message);
    }
});</pre>
                </div>
            </section>
            
            <section id="copilot-studio" class="section">
                <h2>ü§ñ Microsoft Copilot Studio Integration</h2>
                
                <div class="success">
                    <strong>Perfect for Copilot Studio!</strong> This API is specifically optimized for Microsoft Copilot Studio integration with Power Automate flows.
                </div>
                
                <h3>Power Automate Flow Template</h3>
                <div class="grid">
                    <div class="card">
                        <h4>1. Manual Trigger</h4>
                        <p>Configure a manual trigger that accepts file input from the user.</p>
                    </div>
                    <div class="card">
                        <h4>2. Upload Document</h4>
                        <p>HTTP POST action to upload the document to the OCR API.</p>
                    </div>
                    <div class="card">
                        <h4>3. Wait for Processing</h4>
                        <p>Loop with delay to check processing status until completed.</p>
                    </div>
                    <div class="card">
                        <h4>4. Get Results</h4>
                        <p>HTTP GET action to retrieve the processed results.</p>
                    </div>
                </div>
                
                <h3>Custom Connector Configuration</h3>
                <div class="code-block">
                    <pre>Host: api.contractocr.com
Base Path: /api/v1
Authentication: API Key
Header Name: X-API-Key
Security: API Key (Header)</pre>
                </div>
                
                <h3>Bot Conversation Template</h3>
                <div class="code-block">
                    <pre>User: "Analyze this contract"
Bot: "I'll help you analyze your contract. Please upload the PDF file."

[File Upload Trigger]
Bot: "Processing your document... This may take a few minutes."

[Power Automate Flow Execution]
Bot: "Analysis complete! Here's what I found:
- Document: {filename}
- Pages: {page_count}
- Processing Time: {processing_time}s
- Confidence: {ocr_confidence}%
- Legal Terms: {legal_terms}

Would you like me to extract specific information or search for particular clauses?"</pre>
                </div>
                
                <h3>Webhook Integration</h3>
                <p>Configure webhooks to receive real-time notifications when document processing completes:</p>
                <div class="code-block">
                    <pre>POST /api/v1/documents/{document_id}/webhook
{
  "url": "https://your-power-automate-flow-url.com",
  "events": ["completed", "failed"]
}</pre>
                </div>
            </section>
            
            <section id="sdks" class="section">
                <h2>üìö SDKs & Libraries</h2>
                
                <div class="grid">
                    <div class="card">
                        <h4>üêç Python SDK</h4>
                        <div class="code-block">
                            <pre>pip install contract-ocr-client</pre>
                        </div>
                        <p>Full-featured Python client with async support, retry logic, and comprehensive error handling.</p>
                    </div>
                    <div class="card">
                        <h4>üü® JavaScript SDK</h4>
                        <div class="code-block">
                            <pre>npm install contract-ocr-client</pre>
                        </div>
                        <p>Browser and Node.js compatible client with Promise-based API and TypeScript definitions.</p>
                    </div>
                    <div class="card">
                        <h4>üî∑ .NET SDK</h4>
                        <div class="code-block">
                            <pre>Install-Package ContractOCR.Client</pre>
                        </div>
                        <p>C# client library with async/await support and strong typing for all API responses.</p>
                    </div>
                    <div class="card">
                        <h4>‚òï Java SDK</h4>
                        <div class="code-block">
                            <pre>&lt;dependency&gt;
  &lt;groupId&gt;com.contractocr&lt;/groupId&gt;
  &lt;artifactId&gt;client&lt;/artifactId&gt;
&lt;/dependency&gt;</pre>
                        </div>
                        <p>Java client with Spring Boot integration and reactive programming support.</p>
                    </div>
                </div>
            </section>
            
            <section id="errors" class="section">
                <h2>‚ö†Ô∏è Error Handling</h2>
                
                <h3>HTTP Status Codes</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Status Code</th>
                                <th>Error Type</th>
                                <th>Description</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>400</td>
                                <td>Bad Request</td>
                                <td>Invalid file format, size, or parameters</td>
                                <td>Check file requirements and fix request</td>
                            </tr>
                            <tr>
                                <td>401</td>
                                <td>Unauthorized</td>
                                <td>Missing or invalid API key</td>
                                <td>Verify API key in X-API-Key header</td>
                            </tr>
                            <tr>
                                <td>404</td>
                                <td>Not Found</td>
                                <td>Document ID not found</td>
                                <td>Check document ID format and existence</td>
                            </tr>
                            <tr>
                                <td>429</td>
                                <td>Rate Limited</td>
                                <td>Too many requests</td>
                                <td>Wait and retry with exponential backoff</td>
                            </tr>
                            <tr>
                                <td>500</td>
                                <td>Server Error</td>
                                <td>Internal processing error</td>
                                <td>Retry request or contact support</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h3>Error Response Format</h3>
                <div class="code-block">
                    <pre>{
  "error": {
    "code": "FILE_TOO_LARGE",
    "message": "File size exceeds maximum limit of 50MB",
    "details": {
      "file_size": 52428800,
      "max_size": 50000000
    },
    "timestamp": "2024-01-15T10:30:00Z",
    "request_id": "req_123456"
  }
}</pre>
                </div>
                
                <h3>Common Error Codes</h3>
                <div class="grid">
                    <div class="card">
                        <h4><span class="badge danger">FILE_TOO_LARGE</span></h4>
                        <p>File exceeds 50MB size limit. Compress or split the document.</p>
                    </div>
                    <div class="card">
                        <h4><span class="badge danger">INVALID_FILE_FORMAT</span></h4>
                        <p>Only PDF files are supported. Convert other formats to PDF first.</p>
                    </div>
                    <div class="card">
                        <h4><span class="badge warning">CORRUPTED_PDF</span></h4>
                        <p>PDF file is corrupted or unreadable. Try re-saving or recreating the PDF.</p>
                    </div>
                    <div class="card">
                        <h4><span class="badge warning">PROCESSING_TIMEOUT</span></h4>
                        <p>Document processing took too long. Try with a smaller or simpler document.</p>
                    </div>
                </div>
                
                <h3>Best Practices</h3>
                <div class="highlight">
                    <ul>
                        <li><strong>Retry Logic:</strong> Implement exponential backoff for 5xx errors and rate limits</li>
                        <li><strong>Timeout Handling:</strong> Set reasonable timeouts (5-10 minutes for large documents)</li>
                        <li><strong>Error Logging:</strong> Log error details including request_id for debugging</li>
                        <li><strong>User Feedback:</strong> Provide clear error messages to end users</li>
                        <li><strong>Validation:</strong> Validate files client-side before uploading</li>
                    </ul>
                </div>
            </section>
        </div>
    </div>
    
    <div class="footer">
        <div class="container">
            <p>&copy; 2024 Contract OCR API. All rights reserved.</p>
            <p>Need help? Contact <a href="mailto:support@contractocr.com" style="color: #007acc;">support@contractocr.com</a></p>
        </div>
    </div>
</body>
</html>